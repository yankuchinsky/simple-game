!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class n{static setWidth(t){this.width=t}static setHeight(t){this.height=t}static getBoundaries(){return{width:this.width,height:this.height}}}n.width=800,n.height=600;const s=n.getBoundaries().width,r=n.getBoundaries().height;class o extends class{constructor(t){this.field=t}setPosition({x:t,y:e}){this.x=t,this.y=e}move({x:t,y:e}){this.x+=t,this.y+=e}}{constructor(){super(...arguments),this.height=0,this.width=0}draw(){const{x:t,y:e,width:i,height:n,field:s}=this;s.beginPath(),s.lineWidth=.9,s.moveTo(t,e),s.lineTo(t+i,e),s.moveTo(t+i,e+n),s.lineTo(t+i,e),s.moveTo(t,e),s.lineTo(t,e+n),s.moveTo(t,e+n),s.lineTo(t+i,e+n),s.stroke()}outOfBounceCheck(){const{x:t,y:e,width:i}=this;return t<0||e<0||t+i>=s||e+30>=r}getBoundaries(){const{x:t,y:e,width:i,height:n}=this;return{x:t,y:e,width:i,height:n}}}class h extends o{constructor(){super(...arguments),this.x=0,this.y=0,this.width=50,this.height=120}detectCollision(){return!1}}class c{static init(t){this.window=t}static registerKey(t,e,i,n){this.window.addEventListener("keydown",s=>{(s.isComposing||s.keyCode===t)&&e[i](n)})}}class a{setInstance(t){return this.obj=t,this}getInstance(){return this.obj}}class u extends a{static getContainer(){return this.container.getInstance()}static setContainer(t){this.container=t}}class d extends o{constructor(){super(...arguments),this.x=0,this.y=0,this.width=30,this.height=70}carCollisionDetected(){const{x:t,y:e,width:i,height:n}=this,s=u.getContainer().getBoundaries(),r=s.y<=e+n;return!!(t+i>s.x-5&&t+i<s.x+s.width&&r)||!!(t<s.x+s.width+5&&t>s.x&&r)}}class l{constructor(t){this.enemies=[],this.createInterval=0,this.update=()=>{window.setTimeout(()=>{const{enemies:t}=this;this.createEnemy(),t.forEach(t=>{t.move({x:0,y:10})}),this.enemies=t.filter(t=>!t.outOfBounceCheck()).filter(t=>!t.carCollisionDetected()),this.update()},100)},this.field=t}draw(){return this.enemies.forEach(t=>{t.draw()})}createEnemy(){if(this.createInterval+=1,10!==this.createInterval)return;this.createInterval=0;const{field:t}=this,e=new d(t),i=(n=800,Math.floor(Math.random()*Math.floor(n)));var n;e.setPosition({x:i,y:0}),this.enemies.push(e)}start(){this.update()}}var f;!function(t){t[t.up=38]="up",t[t.down=40]="down",t[t.left=37]="left",t[t.right=39]="right"}(f||(f={}));const g=n.getBoundaries().width,y=n.getBoundaries().height;(()=>{const t=document.querySelector("#canvas-field");if(!t||!t.getContext)return;t.width=g,t.height=y;const e=t.getContext("2d");if(!e)return;c.init(window);const i=new l(e),n=new h(e);u.setContainer((new a).setInstance(n)),n.setPosition({x:g/2,y:y/1.5}),c.registerKey(f.up,n,"move",{x:0,y:-5}),c.registerKey(f.down,n,"move",{x:0,y:5}),c.registerKey(f.right,n,"move",{x:5,y:0}),c.registerKey(f.left,n,"move",{x:-5,y:0}),i.start();const s=()=>{e.clearRect(0,0,g,y),n.draw(),i.draw(),requestAnimationFrame(s)};s()})()}]);